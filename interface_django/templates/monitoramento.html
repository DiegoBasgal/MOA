{% extends "base.html" %}

{% block content %}


<div id="content_container">
    <h1>Monitoramento</h1>
    <p>Página de monitoramento. Atualiza a cada 2 segundos.</p>
    <h3>MOA</h3>
    <p>Atualizado em  {{ timestamp }} ({{ tempo_desde_moa_comunicando }} atrás)</p>
    <p>Estado:  {{ estado }}</p>
    <p>Emergencia:  {{ em_acionada }}</p>
    <p>Estado CLP:  {{ CLP_ON }} @ {{ CLP_IP }}</p>
    <p>Set-point usina: {{ setpot_usina | floatformat:0 }} kW</p>
    <p>UG1: {{ pot_ug1 | floatformat:0 }} kW (SP: {{ setpot_ug1 | floatformat:0 }} kW | Horas máquina: {{ tempo_ug1 }} h | Perda na grade: {{ usina.ug1_perda_grade | floatformat:2 }} m)</p>
    <p>UG2: {{ pot_ug2 | floatformat:0 }} kW (SP: {{ setpot_ug2 | floatformat:0 }} kW | Horas máquina: {{ tempo_ug2 }} h | Perda na grade: {{ usina.ug2_perda_grade | floatformat:2 }} m)</p>
    <p>Nv alvo: {{ nv_alvo }} m</p>
    <p>Aguardando reservatório? {{ aguardo }}.</p>
    <p>Nv montante: {{ nv_montante }} m</p>
    </br>
    </br>
    <h3>MOA Modbus Slave</h3>
    <p>Porta:{{ LOCAL_MODBUS_PORT }}.</p>
    <p>Status: {{ modbus_status}}.</p>
    <p>Heart-beat: {{ hb_datestring }}</p>
</div>

<script type = "text/JavaScript">
setTimeout("location.reload(true);", 2000);
</script>

{% endblock content %}
