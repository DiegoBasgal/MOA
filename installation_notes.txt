#Implementação MOA
sudo su
ufw allow mysql
apt install python3 -y
apt install pip -y
sudo mkdir /opt/operacao-autonoma
cd /opt/
git clone https://gitlab.com/ritmo-energia/operacao-autonoma.git
cd operacao-autonoma
export PYTHONPATH=$PYTHONPATH:/opt/operacao-autonoma
git branch -a
git checkout #BRANCH
apt install mariadb-server -y
apt install mariadb-client -y
mysql_secure_installation
mariadb
#GRANT ALL ON *.* TO 'moa'@'localhost' IDENTIFIED BY 'password' WITH GRANT OPTION; FLUSH PRIVILEGES; EXIT;
apt install libmysqlclient-dev -y
apt install libmariadb-dev -y
apt install unixodbc unixodbc-dev -y
pip install -r ./src/requirements.txt # Vai FALHAR! Editar conforme necessário para instalar
cp interface_django/uwsgi.service /etc/systemd/system/uwsgi.service
nano /etc/systemd/system/uwsgi.service 
nano interface_django/interface_django_uwsgi.ini # Editar conforme necessário para instalar
#systemctl enable uwsgi.service
#systemctl start uwsgi.service
apt-get install nginx -y
/etc/init.d/nginx start 
cp interface_django/interface_django_nginx.conf /etc/nginx/sites-available/
nano /etc/nginx/sites-available/interface_django_nginx.conf #EDITAR
ln -s /etc/nginx/sites-available/interface_django_nginx.conf /etc/nginx/sites-enabled/
/etc/init.d/nginx restart
sudo mariadb -u root -p
#CREATE DATABASE django_db; EXIT;
nano interface_django/interface_django/settings.py # Alterar senha no Django
python3 interface_django/manage.py migrate
## COPIAR BANCO DO MODELO!
sudo python3 interface_django/manage.py createsuperuser
sudo reboot


